Peach=function(){function e(){Peach.Primitive.clear();for(var e=Peach.entities.length,t=0;e>t;t++)Peach.entities[t].draw()}function t(){requestAnimFrame(t),e(),n()}function n(){Peach.gameState.t1=Peach.gameState.t2,Peach.gameState.t2=(new Date).getTime(),Peach.gameState.frameTime=Peach.gameState.t2-Peach.gameState.t1;for(var e=Peach.entities.length,t=e-1;t>=0;t--)Peach.entities[t].update(),Peach.entities[t].alive||Peach.entities.splice(t,1)}return{context:null,entities:[],gameState:{},init:function(e){var t=document.getElementById(e);Peach.gameState.width=t.width,Peach.gameState.height=t.height,Peach.context=t.getContext("2d"),Peach.Input.init(),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()},start:function(){Peach.gameState.t2=(new Date).getTime(),t()}}}(),Peach.Input=function(){function t(t){var n;window.event?n=window.event.keyCode:t&&(n=e.which),Peach.Input.state.keys[c[n]]=!0}function n(t){var n;window.event?n=window.event.keyCode:t&&(n=e.which),Peach.Input.state.keys[c[n]]=!1}function a(){Peach.Input.state.mouseIsDown=!0}function i(e){Peach.Input.state.mousePosition.x=e.clientX,Peach.Input.state.mousePosition.y=e.clientY}function o(){Peach.Input.state.mouseIsDown=!1}var c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"left_window",92:"right_window",93:"select",96:"0_pad",97:"1_pad",98:"2_pad",99:"3_pad",100:"4_pad",101:"5_pad",102:"6_pad",103:"7_pad",104:"8_pad",105:"9_pad"};return{init:function(){c.length;for(var e in c)Peach.Input.state.keys[c[e]]=!1;window.onkeydown=t,window.onkeyup=n,window.onmousedown=a,window.onmousemove=i,window.onmouseup=o},state:{mouseIsDown:!1,mousePosition:{x:0,y:0},keys:{}}}}(),Peach.Drawable=function(){return{draw:function(){}}}(),Peach.Primitive=function(){return{clear:function(){Peach.context.clearRect(0,0,Peach.gameState.width,Peach.gameState.height)},rect:function(e,t,n,a,i){Peach.context.fillStyle=i,Peach.context.fillRect(e,t,n,a)},circle:function(e,t,n,a){Peach.context.fillStyle=a,Peach.context.beginPath(),Peach.context.arc(e,t,n,0,2*Math.PI,!0),Peach.context.closePath(),Peach.context.fill()}}}();